import tkinter
from tkinter import *
from tkinter import messagebox
#1(TITLE,ICON,WINDOW)
root=Tk()
root.title('Library Management System')
root.iconbitmap("C:\\Users\\PRASAD\\Downloads\\library.ico")
root.geometry('500x200')


#2(ADDING TEXT IN WINDOW)
txt1=Label(root,text='Enter Author Name :',font=50)
txt2=Label(root,text='Enter Book Name :',font=50)
txt1.grid(row=0,column=0)
txt2.grid(row=1,column=0)

#3(ADDING INPUT BOX)
enter1=Entry(root,fg='red',width=20)#AUTHOR NAME
enter1.grid(row=0,column=1)#BOOK NAME
enter2=Entry(root,fg='red',width=20)
enter2.grid(row=1,column=1)

#4(ADDING BUTTONS)
update_button=Button(root,text='UPDATE',height=2,width=10)
check_button=Button(root,text='CHECK',height=2,width=10)
borrow_button=Button(root,text='BORROW',height=2,width=10)
return_button=Button(root,text='RETURN',height=2,width=10)

#5(PLACEMENT OF BUTTONS)
update_button.grid(row=2,column=0)
check_button.grid(row=2,column=1)
borrow_button.grid(row=3,column=0)
return_button.grid(row=3,column=1)

#7(MESSAGE BOX)
def update_message():
   messagebox.showinfo("Update", "Sucessfully Added")
def borrow_message():
   messagebox.showinfo("Update", "Sucessfully Borrowed")
def return_message():
   messagebox.showinfo("Update", "Sucessfully Returned")
   
   
#6(ADDING COMMANDS)
def update():
    name=enter1.get()
    book=enter2.get()
    name=name.lower()
    book=book.lower()
    import mysql.connector
    mydb=mysql.connector.connect(host='localhost',user='root',password='123456',database='project')
    cur=mydb.cursor()
    query='INSERT INTO books(BOOKNAME,AUTHORNAME) VALUES(%s, %s)'
    b1=(name,book)
    cur.execute(query,b1)
    mydb.commit()
    update_message()

update_button=Button(root,text='UPDATE',height=2,width=10,command=update)
update_button.grid(row=2,column=0)


def check():
   name=enter1.get()
   book=enter2.get()
   name=name.lower()
   book=book.lower()
   import mysql.connector
   mydb=mysql.connector.connect(host='localhost',user='root',password='123456',database='project')
   cur=mydb.cursor()
   query="select * from books where  BOOKNAME=(%s)"
   b2=(name,)
   cur.execute(query,b2)
   result=cur.fetchone()
   if result[0]==name and result[1]==book:
      show=messagebox.showinfo("showinfo", "Book Available")
   else:
      show_other=messagebox.showinfo("showinfo", "Book not found") 
   print('Author name :',result[0])#just verifying(can be removed if you want to)
   print(' Book name   :',result[1])#same goes for this
check_button=Button(root,text='CHECK',height=2,width=10,command=check)
check_button.grid(row=2,column=1)

def borrow():
   name=enter1.get()
   book=enter2.get()
   name=name.lower()
   book=book.lower()
   import mysql.connector
   mydb=mysql.connector.connect(host='localhost',user='root',password='123456',database='project')
   cur=mydb.cursor()
   query2='INSERT INTO borrowed(BOOKNAME,AUTHORNAME) VALUES(%s, %s)'
   b2=(name,book)
   cur.execute(query2,b2)
   mydb.commit()
   query3='DELETE FROM books WHERE BOOKNAME=(%s)'
   b3=(name,)
   cur.execute(query3,b3)
   mydb.commit()
   borrow_message()
borrow_button=Button(root,text='BORROW',height=2,width=10,command=borrow)
borrow_button.grid(row=3,column=0)


def Return():
   name=enter1.get()
   book=enter2.get()
   name=name.lower()
   book=book.lower()
   import mysql.connector
   mydb=mysql.connector.connect(host='localhost',user='root',password='123456',database='project')
   cur=mydb.cursor()
   query2='INSERT INTO books(BOOKNAME,AUTHORNAME) VALUES(%s, %s)'
   b2=(name,book)
   cur.execute(query2,b2)
   mydb.commit()
   query3='DELETE FROM borrowed WHERE BOOKNAME=(%s)'
   b3=(name,)
   cur.execute(query3,b3)
   mydb.commit()
   return_message()
return_button=Button(root,text='RETURN',height=2,width=10,command=Return)
return_button.grid(row=3,column=1)


root.mainloop()




    

